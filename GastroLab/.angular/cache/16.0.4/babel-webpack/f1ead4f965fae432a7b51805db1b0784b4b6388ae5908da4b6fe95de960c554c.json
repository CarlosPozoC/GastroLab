{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../apiservice.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../navbar/navbar.component\";\nfunction RecetasComponent_div_7_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ingredienteId_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.obtenerNombreIngrediente(ingredienteId_r4), \" \");\n  }\n}\nfunction RecetasComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8, \"Ingredientes:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"ul\");\n    i0.ɵɵtemplate(10, RecetasComponent_div_7_li_10_Template, 2, 1, \"li\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"img\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const receta_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(receta_r2.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Tipo: \", receta_r2.tipo, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Descripci\\u00F3n: \", receta_r2.descripcion, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", receta_r2.ingredientes);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", receta_r2.url, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction RecetasComponent_div_8_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\");\n    i0.ɵɵelement(2, \"input\", 24);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ingrediente_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"name\", ingrediente_r7.id.toString())(\"ngModel\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ingrediente_r7.nombre, \" \");\n  }\n}\nfunction RecetasComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9)(2, \"h3\");\n    i0.ɵɵtext(3, \"Crear Receta\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"form\", 10, 11);\n    i0.ɵɵlistener(\"ngSubmit\", function RecetasComponent_div_8_Template_form_ngSubmit_4_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const _r5 = i0.ɵɵreference(5);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.crearReceta(_r5));\n    });\n    i0.ɵɵelementStart(6, \"div\", 12)(7, \"label\", 13);\n    i0.ɵɵtext(8, \"Nombre:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 12)(11, \"label\", 15);\n    i0.ɵɵtext(12, \"Tipo:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"input\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 12)(15, \"label\", 17);\n    i0.ɵɵtext(16, \"Descripci\\u00F3n:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"textarea\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 12)(19, \"label\", 19);\n    i0.ɵɵtext(20, \"URL:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(21, \"input\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 12)(23, \"label\", 21);\n    i0.ɵɵtext(24, \"Ingredientes:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(25, RecetasComponent_div_8_div_25_Template, 4, 3, \"div\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"div\", 12)(27, \"button\", 22);\n    i0.ɵɵtext(28, \"Crear\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function RecetasComponent_div_8_Template_button_click_29_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.cerrarPestanaCreacion());\n    });\n    i0.ɵɵtext(30, \"Cancelar\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(25);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.ingredientes);\n  }\n}\nclass RecetasComponent {\n  constructor(apiservice, router) {\n    this.apiservice = apiservice;\n    this.router = router;\n    this.recetas = [];\n    this.mostrarPestanaCreacion = false;\n    this.usuario = null;\n    this.ingredientes = [];\n  }\n  ngOnInit() {\n    this.obtenerRecetas();\n    const loggedInUser = localStorage.getItem('loggedInUser');\n    if (loggedInUser) {\n      this.usuario = JSON.parse(loggedInUser);\n    } else {\n      // Si no hay usuario logeado, redirigir al componente de login\n      this.router.navigate(['/login']);\n    }\n    this.obtenerIngredientes();\n  }\n  obtenerRecetas() {\n    this.apiservice.obtenerRecetas().subscribe(data => {\n      this.recetas = data;\n    }, error => {\n      console.error('Error al obtener las recetas:', error);\n    });\n  }\n  obtenerIngredientes() {\n    this.apiservice.obtenerIngredientes().subscribe(data => {\n      this.ingredientes = data;\n    }, error => {\n      console.error('Error al obtener los ingredientes:', error);\n    });\n  }\n  obtenerNombreIngrediente(ingredienteId) {\n    const ingrediente = this.ingredientes.find(ingrediente => ingrediente.id === ingredienteId);\n    return ingrediente ? ingrediente.nombre : '';\n  }\n  abrirPestanaCreacion() {\n    this.mostrarPestanaCreacion = true;\n  }\n  cerrarPestanaCreacion() {\n    this.mostrarPestanaCreacion = false;\n  }\n  crearReceta(form) {\n    if (form.valid) {\n      // Obtener los IDs de los ingredientes seleccionados\n      const ingredientesSeleccionados = this.ingredientes.filter(ingrediente => form.value[ingrediente.id]);\n      const ingredientesIds = ingredientesSeleccionados.map(ingrediente => ingrediente.id);\n      const nuevaReceta = {\n        nombre: form.value.nombre,\n        descripcion: form.value.descripcion,\n        tipo: form.value.tipo,\n        url: form.value.url,\n        usuarioId: this.usuario?.id || 0,\n        ingredientes: ingredientesIds\n      };\n      this.apiservice.crearReceta(nuevaReceta).subscribe();\n      this.cerrarPestanaCreacion();\n      this.obtenerRecetas();\n      location.reload();\n      this.obtenerRecetas();\n      location.reload();\n    }\n  }\n}\nRecetasComponent.ɵfac = function RecetasComponent_Factory(t) {\n  return new (t || RecetasComponent)(i0.ɵɵdirectiveInject(i1.apiservice), i0.ɵɵdirectiveInject(i2.Router));\n};\nRecetasComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RecetasComponent,\n  selectors: [[\"app-recetas\"]],\n  decls: 9,\n  vars: 2,\n  consts: [[1, \"container\"], [1, \"btn-create\", 3, \"click\"], [1, \"card-container\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"creacion-overlay\", 4, \"ngIf\"], [1, \"card\"], [4, \"ngFor\", \"ngForOf\"], [3, \"src\"], [1, \"creacion-overlay\"], [1, \"creacion-modal\"], [3, \"ngSubmit\"], [\"form\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"nombre\"], [\"type\", \"text\", \"id\", \"nombre\", \"name\", \"nombre\", \"ngModel\", \"\", \"required\", \"\"], [\"for\", \"tipo\"], [\"type\", \"text\", \"id\", \"tipo\", \"name\", \"tipo\", \"ngModel\", \"\", \"required\", \"\"], [\"for\", \"descripcion\"], [\"id\", \"descripcion\", \"name\", \"descripcion\", \"ngModel\", \"\", \"required\", \"\"], [\"for\", \"url\"], [\"type\", \"text\", \"id\", \"url\", \"name\", \"url\", \"ngModel\", \"\", \"required\", \"\"], [\"for\", \"ingredientes\"], [\"type\", \"submit\"], [\"type\", \"button\", 3, \"click\"], [\"type\", \"checkbox\", 3, \"name\", \"ngModel\"]],\n  template: function RecetasComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-navbar\");\n      i0.ɵɵelementStart(1, \"div\", 0)(2, \"h2\");\n      i0.ɵɵtext(3, \"Recetas\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function RecetasComponent_Template_button_click_4_listener() {\n        return ctx.abrirPestanaCreacion();\n      });\n      i0.ɵɵtext(5, \"Crear Receta\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 2);\n      i0.ɵɵtemplate(7, RecetasComponent_div_7_Template, 12, 5, \"div\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(8, RecetasComponent_div_8_Template, 31, 1, \"div\", 4);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngForOf\", ctx.recetas);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.mostrarPestanaCreacion);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.CheckboxControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i5.NavbarComponent],\n  styles: [\".container[_ngcontent-%COMP%] {\\r\\n  max-width: 800px;\\r\\n  margin: 0 auto;\\r\\n  padding: 20px;\\r\\n}\\r\\n\\r\\nh2[_ngcontent-%COMP%] {\\r\\n  font-size: 24px;\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n.btn-create[_ngcontent-%COMP%] {\\r\\n  background-color: #007bff;\\r\\n  color: #fff;\\r\\n  padding: 8px 16px;\\r\\n  border: none;\\r\\n  border-radius: 4px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.card-container[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  flex-wrap: wrap;\\r\\n}\\r\\n\\r\\n.card[_ngcontent-%COMP%] {\\r\\n  margin-top:10px;\\r\\n  margin-bottom: 20px;\\r\\n  margin-right: 10px;\\r\\n  padding: 10px;\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 8px;\\r\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\r\\n  width: 200px;\\r\\n  height: 150px;\\r\\n  display: block;\\r\\n  margin: 0 auto 10px;\\r\\n  border-radius: 50%;\\r\\n}\\r\\n\\r\\n.creacion-overlay[_ngcontent-%COMP%] {\\r\\n  position: fixed;\\r\\n  top: 0;\\r\\n  left: 0;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  background-color: rgba(0, 0, 0, 0.5);\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  z-index: 999;\\r\\n}\\r\\n\\r\\n.creacion-modal[_ngcontent-%COMP%] {\\r\\n  background-color: #fff;\\r\\n  padding: 20px;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\n.form-group[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\nlabel[_ngcontent-%COMP%] {\\r\\n  font-weight: bold;\\r\\n}\\r\\n\\r\\ninput[type=\\\"text\\\"][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  padding: 8px;\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\n.form-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  padding: 5px;\\r\\n  border-radius: 4px;\\r\\n  border: 1px solid #ccc;\\r\\n}\\r\\n\\r\\n.form-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n  margin-top: 10px;\\r\\n  background-color: #4caf50;\\r\\n  color: #fff;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.form-group[_ngcontent-%COMP%]   button[type=\\\"button\\\"][_ngcontent-%COMP%] {\\r\\n  background-color: #f44336;\\r\\n}\\r\\n\\r\\n.form-group[_ngcontent-%COMP%]   button[type=\\\"submit\\\"][_ngcontent-%COMP%] {\\r\\n  background-color: #008CBA;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcmVjZXRhcy9yZWNldGFzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxnQkFBZ0I7RUFDaEIsY0FBYztFQUNkLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGVBQWU7RUFDZixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsV0FBVztFQUNYLGlCQUFpQjtFQUNqQixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixtQkFBbUI7RUFDbkIsa0JBQWtCO0VBQ2xCLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLHdDQUF3QztBQUMxQzs7QUFFQTtFQUNFLFlBQVk7RUFDWixhQUFhO0VBQ2IsY0FBYztFQUNkLG1CQUFtQjtFQUNuQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsTUFBTTtFQUNOLE9BQU87RUFDUCxXQUFXO0VBQ1gsWUFBWTtFQUNaLG9DQUFvQztFQUNwQyxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsYUFBYTtFQUNiLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTs7RUFFRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIseUJBQXlCO0VBQ3pCLFdBQVc7RUFDWCxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XHJcbiAgbWF4LXdpZHRoOiA4MDBweDtcclxuICBtYXJnaW46IDAgYXV0bztcclxuICBwYWRkaW5nOiAyMHB4O1xyXG59XHJcblxyXG5oMiB7XHJcbiAgZm9udC1zaXplOiAyNHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn1cclxuXHJcbi5idG4tY3JlYXRlIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIHBhZGRpbmc6IDhweCAxNnB4O1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4uY2FyZC1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC13cmFwOiB3cmFwO1xyXG59XHJcblxyXG4uY2FyZCB7XHJcbiAgbWFyZ2luLXRvcDoxMHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcclxufVxyXG5cclxuLmNhcmQgaW1nIHtcclxuICB3aWR0aDogMjAwcHg7XHJcbiAgaGVpZ2h0OiAxNTBweDtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICBtYXJnaW46IDAgYXV0byAxMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxufVxyXG5cclxuLmNyZWFjaW9uLW92ZXJsYXkge1xyXG4gIHBvc2l0aW9uOiBmaXhlZDtcclxuICB0b3A6IDA7XHJcbiAgbGVmdDogMDtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICB6LWluZGV4OiA5OTk7XHJcbn1cclxuXHJcbi5jcmVhY2lvbi1tb2RhbCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxufVxyXG5cclxuLmZvcm0tZ3JvdXAge1xyXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn1cclxuXHJcbmxhYmVsIHtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG5cclxuaW5wdXRbdHlwZT1cInRleHRcIl0sXHJcbnRleHRhcmVhIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBwYWRkaW5nOiA4cHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbn1cclxuXHJcbi5mb3JtLWdyb3VwIGJ1dHRvbiB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgcGFkZGluZzogNXB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG59XHJcblxyXG4uZm9ybS1ncm91cCBidXR0b24ge1xyXG4gIG1hcmdpbi10b3A6IDEwcHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzRjYWY1MDtcclxuICBjb2xvcjogI2ZmZjtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5mb3JtLWdyb3VwIGJ1dHRvblt0eXBlPVwiYnV0dG9uXCJdIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjQ0MzM2O1xyXG59XHJcblxyXG4uZm9ybS1ncm91cCBidXR0b25bdHlwZT1cInN1Ym1pdFwiXSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwOENCQTtcclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { RecetasComponent };","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r3","obtenerNombreIngrediente","ingredienteId_r4","ɵɵtemplate","RecetasComponent_div_7_li_10_Template","ɵɵelement","ɵɵtextInterpolate","receta_r2","nombre","tipo","descripcion","ɵɵproperty","ingredientes","url","ɵɵsanitizeUrl","ingrediente_r7","id","toString","ɵɵlistener","RecetasComponent_div_8_Template_form_ngSubmit_4_listener","ɵɵrestoreView","_r9","_r5","ɵɵreference","ctx_r8","ɵɵnextContext","ɵɵresetView","crearReceta","RecetasComponent_div_8_div_25_Template","RecetasComponent_div_8_Template_button_click_29_listener","ctx_r10","cerrarPestanaCreacion","ctx_r1","RecetasComponent","constructor","apiservice","router","recetas","mostrarPestanaCreacion","usuario","ngOnInit","obtenerRecetas","loggedInUser","localStorage","getItem","JSON","parse","navigate","obtenerIngredientes","subscribe","data","error","console","ingredienteId","ingrediente","find","abrirPestanaCreacion","form","valid","ingredientesSeleccionados","filter","value","ingredientesIds","map","nuevaReceta","usuarioId","location","reload","ɵɵdirectiveInject","i1","i2","Router","selectors","decls","vars","consts","template","RecetasComponent_Template","rf","ctx","RecetasComponent_Template_button_click_4_listener","RecetasComponent_div_7_Template","RecetasComponent_div_8_Template"],"sources":["C:\\Users\\cpozo\\OneDrive\\Escritorio\\TFG\\GastroLab\\GastroLab\\src\\app\\recetas\\recetas.component.ts","C:\\Users\\cpozo\\OneDrive\\Escritorio\\TFG\\GastroLab\\GastroLab\\src\\app\\recetas\\recetas.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { apiservice } from '../apiservice.service';\nimport { Receta } from '../interfaces/receta.interface';\nimport { Ingrediente } from '../interfaces/ingrediente.interface';\nimport { Usuario } from '../interfaces/usuario.interface';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-recetas',\n  templateUrl: './recetas.component.html',\n  styleUrls: ['./recetas.component.css']\n})\nexport class RecetasComponent implements OnInit {\n  recetas: Receta[] = [];\n  mostrarPestanaCreacion = false;\n  usuario: Usuario | null = null;\n  ingredientes: Ingrediente[] = [];\n\n  constructor(private apiservice: apiservice, private router: Router) {}\n\n  ngOnInit(): void {\n    this.obtenerRecetas();\n    const loggedInUser = localStorage.getItem('loggedInUser');\n    if (loggedInUser) {\n      this.usuario = JSON.parse(loggedInUser);\n    } else {\n      // Si no hay usuario logeado, redirigir al componente de login\n      this.router.navigate(['/login']);\n    }\n    this.obtenerIngredientes();\n  }\n\n  obtenerRecetas(): void {\n    this.apiservice.obtenerRecetas().subscribe(\n      (data: Receta[]) => {\n        this.recetas = data;\n      },\n      (error: any) => {\n        console.error('Error al obtener las recetas:', error);\n      }\n    );\n  }\n\n  obtenerIngredientes(): void {\n    this.apiservice.obtenerIngredientes().subscribe(\n      (data: Ingrediente[]) => {\n        this.ingredientes = data;\n      },\n      (error: any) => {\n        console.error('Error al obtener los ingredientes:', error);\n      }\n    );\n  }\n\n  obtenerNombreIngrediente(ingredienteId: number): string {\n    const ingrediente = this.ingredientes.find(ingrediente => ingrediente.id === ingredienteId);\n    return ingrediente ? ingrediente.nombre : '';\n  }\n\n\n\n  abrirPestanaCreacion(): void {\n    this.mostrarPestanaCreacion = true;\n  }\n\n  cerrarPestanaCreacion(): void {\n    this.mostrarPestanaCreacion = false;\n  }\n\n  crearReceta(form: any): void {\n    if (form.valid) {\n      // Obtener los IDs de los ingredientes seleccionados\n      const ingredientesSeleccionados = this.ingredientes.filter(ingrediente => form.value[ingrediente.id]);\n      const ingredientesIds = ingredientesSeleccionados.map(ingrediente => ingrediente.id);\n\n      const nuevaReceta: any = {\n        nombre: form.value.nombre,\n        descripcion: form.value.descripcion,\n        tipo: form.value.tipo,\n        url: form.value.url,\n        usuarioId: this.usuario?.id || 0,\n        ingredientes: ingredientesIds\n      };\n\n      this.apiservice.crearReceta(nuevaReceta).subscribe();\n      this.cerrarPestanaCreacion();\n      this.obtenerRecetas();\n      location.reload();\n      this.obtenerRecetas();\n      location.reload();\n    }\n  }\n}\n","<app-navbar></app-navbar>\n\n<div class=\"container\">\n  <h2>Recetas</h2>\n\n  <button class=\"btn-create\" (click)=\"abrirPestanaCreacion()\">Crear Receta</button>\n\n  <div class=\"card-container\">\n    <div class=\"card\" *ngFor=\"let receta of recetas\">\n      <h3>{{ receta.nombre }}</h3>\n      <p>Tipo: {{ receta.tipo }}</p>\n      <p>Descripción: {{ receta.descripcion }}</p>\n      <p>Ingredientes:</p>\n      <ul>\n        <li *ngFor=\"let ingredienteId of receta.ingredientes\">\n          {{ obtenerNombreIngrediente(ingredienteId) }}\n        </li>\n      </ul>\n      <img [src]=\"receta.url\">\n    </div>\n  </div>\n  <div class=\"creacion-overlay\" *ngIf=\"mostrarPestanaCreacion\">\n    <div class=\"creacion-modal\">\n      <h3>Crear Receta</h3>\n      <form (ngSubmit)=\"crearReceta(form)\" #form=\"ngForm\">\n        <div class=\"form-group\">\n          <label for=\"nombre\">Nombre:</label>\n          <input type=\"text\" id=\"nombre\" name=\"nombre\" ngModel required>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"tipo\">Tipo:</label>\n          <input type=\"text\" id=\"tipo\" name=\"tipo\" ngModel required>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"descripcion\">Descripción:</label>\n          <textarea id=\"descripcion\" name=\"descripcion\" ngModel required></textarea>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"url\">URL:</label>\n          <input type=\"text\" id=\"url\" name=\"url\" ngModel required>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"ingredientes\">Ingredientes:</label>\n          <div *ngFor=\"let ingrediente of ingredientes\">\n            <label>\n              <input type=\"checkbox\" [name]=\"ingrediente.id.toString()\" [ngModel]=\"false\">\n              {{ ingrediente.nombre }}\n            </label>\n          </div>\n        </div>\n        <div class=\"form-group\">\n          <button type=\"submit\">Crear</button>\n          <button type=\"button\" (click)=\"cerrarPestanaCreacion()\">Cancelar</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}